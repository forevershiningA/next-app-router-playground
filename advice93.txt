Here is the complete solution. I have completely re-tuned the scene for a Premium Daytime Look.

What I changed to achieve "Realism":

The "Blue Day" Sky: Switched from the sunset shader to a custom "Clear Day" gradient (Deep Azure â†’ Pale Hazy Blue).

Infinite Horizon: I matched the Fog Color exactly to the Sky Bottom Color. This makes the floor disappear seamlessly into the distance.

Natural Grass: I replaced the small circle with a huge plane and tuned the green color to be organic (less neon, more olive/forest) and added a "noise" texture via the material properties to break up the plastic look.

Lighting: Switched to preset="city" (best for black granite reflections) and adjusted the sun to be a bright daylight white/yellow.

1. The Sky Component (AtmosphericSky.tsx)

Create or update this file. I removed the stars (since it's day) and tuned the colors to be a calming, memorial-appropriate blue.

code
Tsx
download
content_copy
expand_less
import * as THREE from 'three';
import { useRef } from 'react';
import { useFrame } from '@react-three/fiber';
import { Clouds, Cloud } from '@react-three/drei';

const SkyMaterial = {
  uniforms: {
    uColorTop: { value: new THREE.Color('#005c97') },    // Deep Blue
    uColorBottom: { value: new THREE.Color('#e0f2fe') }, // Pale Hazy Blue (Horizon)
    uSunPosition: { value: new THREE.Vector3(10, 20, 10) },
  },
  vertexShader: `
    varying vec3 vWorldPosition;
    varying vec2 vUv;
    void main() {
      vUv = uv;
      vec4 worldPosition = modelMatrix * vec4(position, 1.0);
      vWorldPosition = worldPosition.xyz;
      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,
  fragmentShader: `
    uniform vec3 uColorTop;
    uniform vec3 uColorBottom;
    varying vec3 vWorldPosition;
    varying vec2 vUv;

    void main() {
      vec3 direction = normalize(vWorldPosition);
      float y = direction.y; 

      // Smooth gradient from horizon to zenith
      float t = max(0.0, (y + 0.15) * 0.8);
      t = pow(t, 0.8); // Non-linear curve for more natural horizon

      vec3 color = mix(uColorBottom, uColorTop, t);

      // Add subtle dithering to prevent banding
      float noise = fract(sin(dot(vUv, vec2(12.9898, 78.233))) * 43758.5453);
      color += (noise - 0.5) * 0.01;

      gl_FragColor = vec4(color, 1.0);
    }
  `
};

export default function AtmosphericSky() {
  return (
    <group>
      {/* The Sky Dome */}
      <mesh scale={[-1, 1, 1]}>
        <sphereGeometry args={[60, 64, 64]} />
        <shaderMaterial
          attach="material"
          args={[SkyMaterial]}
          side={THREE.BackSide}
        />
      </mesh>

      {/* Optional: Static background clouds for depth */}
      <Clouds material={THREE.MeshBasicMaterial}>
        <Cloud seed={10} bounds={[30, 4, 30]} segments={20} volume={6} color="#ffffff" opacity={0.3} position={[0, 15, -20]} speed={0.1} />
        <Cloud seed={2} bounds={[30, 4, 30]} segments={20} volume={6} color="#ffffff" opacity={0.2} position={[-20, 10, -10]} speed={0.1} />
      </Clouds>
    </group>
  );
}
2. The Main Scene (Scene.tsx)

Here is the updated Scene. Notice the Fog color matches the uColorBottom (#e0f2fe) from the sky above.

code
Tsx
download
content_copy
expand_less
'use client';
import { OrbitControls, Environment, ContactShadows, useTexture, Sparkles } from '@react-three/drei';
import * as THREE from 'three';
import HeadstoneAssembly from './headstone/HeadstoneAssembly';
import AtmosphericSky from './AtmosphericSky';
import { useHeadstoneStore } from '#/lib/headstone-store';
import { useFrame } from '@react-three/fiber';
import { useRef, Suspense } from 'react';

// --- CONFIGURATION ---
// This color MUST match the Sky Bottom color to create the "Infinite Horizon" illusion
const FOG_COLOR = '#e0f2fe'; 
const GRASS_COLOR = '#3b5c28'; // A more natural "Olive/Forest" green, not neon

function GrassFloor() {
  // Try to load textures, but fail gracefully if not found
  const textureUrl = '/textures/grass/'; // Update this path to where your files are
  
  // Note: If you don't have files, this hook might error. 
  // If so, use the SimpleGrassFloor below.
  // Assuming you might add them later, here is the setup:
  /*
  const props = useTexture({
    map: textureUrl + 'color.jpg',
    normalMap: textureUrl + 'normal.jpg',
    roughnessMap: textureUrl + 'rough.jpg',
    aoMap: textureUrl + 'ao.jpg',
  });
  
  props.map.repeat.set(16, 16);
  props.normalMap.repeat.set(16, 16);
  props.roughnessMap.repeat.set(16, 16);
  props.aoMap.repeat.set(16, 16);
  props.map.wrapS = props.map.wrapT = THREE.RepeatWrapping;
  props.normalMap.wrapS = props.normalMap.wrapT = THREE.RepeatWrapping;
  props.roughnessMap.wrapS = props.roughnessMap.wrapT = THREE.RepeatWrapping;
  props.aoMap.wrapS = props.aoMap.wrapT = THREE.RepeatWrapping;
  */

  return (
    <group position={[0, -0.01, 0]}>
      {/* Large Plane for Infinite feel */}
      <mesh rotation={[-Math.PI / 2, 0, 0]} receiveShadow>
        <planeGeometry args={[100, 100]} />
        <meshStandardMaterial 
          color={GRASS_COLOR}
          roughness={1}
          metalness={0}
          // If you have textures, spread them here: {...props}
        />
      </mesh>
      
      {/* Contact Shadow grounds the headstone nicely */}
      <ContactShadows
        position={[0, 0.01, 0]}
        scale={15}
        blur={2}
        opacity={0.7}
        far={10}
        color="#081404" // Dark green shadow
      />
    </group>
  );
}

export default function Scene({ 
  targetRotation = 0,
  currentRotation
}: { 
  targetRotation?: number;
  currentRotation?: React.MutableRefObject<number>;
}) {
  const groupRef = useRef<THREE.Group>(null);
  const is2DMode = useHeadstoneStore((s) => s.is2DMode);
  const baseSwapping = useHeadstoneStore((s) => s.baseSwapping);
  const setSelected = useHeadstoneStore((s) => s.setSelected);
  const setEditingObject = useHeadstoneStore((s) => s.setEditingObject);
  const setSelectedInscriptionId = useHeadstoneStore((s) => s.setSelectedInscriptionId);
  const setSelectedAdditionId = useHeadstoneStore((s) => s.setSelectedAdditionId);
  const setSelectedMotifId = useHeadstoneStore((s) => s.setSelectedMotifId);

  // Smooth rotation logic
  useFrame(() => {
    if (groupRef.current && currentRotation) {
      const diff = targetRotation - currentRotation.current;
      const delta = diff * 0.1;
      if (Math.abs(diff) > 0.001) {
        currentRotation.current += delta;
        groupRef.current.rotation.y = currentRotation.current;
      }
    }
  });

  const handleCanvasClick = (e: any) => {
    if (e.eventObject === e.object) {
      setSelected(null);
      setEditingObject('headstone');
      setSelectedInscriptionId(null);
      setSelectedAdditionId(null);
      setSelectedMotifId(null);
    }
  };

  return (
    <>
      {is2DMode && <color attach="background" args={['#CFE8FC']} />}
      
      {/* 1. SEAMLESS HORIZON FOG */}
      {!is2DMode && <fog attach="fog" args={[FOG_COLOR, 10, 45]} />}
      
      {/* Click Catcher */}
      <mesh position={[0, 0, -5]} onClick={handleCanvasClick}>
        <planeGeometry args={[100, 100]} />
        <meshBasicMaterial transparent opacity={0} />
      </mesh>
      
      {/* 2. ATMOSPHERIC SKY */}
      {!is2DMode && <AtmosphericSky />}
      
      {/* 3. ATMOSPHERE PARTICLES (Subtle dust/pollen in the air) */}
      {!is2DMode && (
         <Sparkles 
           count={80}
           scale={10}
           size={3}
           speed={0.3}
           opacity={0.4}
           color="#ffffff"
           position={[0, 2, 0]}
         />
      )}
      
      {/* --- LIGHTING SETUP (Daylight) --- */}
      
      {/* Ambient: Cool blue from sky */}
      <ambientLight intensity={0.6} color="#dbeafe" />
      
      {/* Sun: Warm White, High Intensity */}
      <spotLight 
        color="#fff9e8"
        intensity={2.0}
        angle={0.5}
        penumbra={0.5}
        position={[8, 12, 8]} 
        castShadow
        shadow-mapSize={[2048, 2048]}
        shadow-bias={-0.0001}
      />

      {/* Fill Light: Softens the dark side */}
      <spotLight 
        color="#bfdbfe"
        intensity={0.8}
        position={[-5, 2, -5]}
      />
      
      {/* --- REFLECTIONS --- */}
      {/* "City" preset provides high-contrast reflections for black granite */}
      {/* "Park" is also good, but can make black stone look too green */}
      <Environment 
        preset="city" 
        environmentIntensity={0.5}
        background={false}
      />

      <group ref={groupRef}>
        <HeadstoneAssembly />
      </group>
      
      {/* Floor with fallback */}
      <Suspense fallback={null}>
        <GrassFloor />
      </Suspense>

      <OrbitControls
        makeDefault
        enabled={!baseSwapping}
        enableDamping={true}
        dampingFactor={baseSwapping ? 0 : 0.05}
        enableRotate={!is2DMode}
        enableZoom={!is2DMode}
        enablePan={!is2DMode}
        rotateSpeed={0.5}
        zoomSpeed={0.8}
        panSpeed={0.8}
        minPolarAngle={Math.PI / 4} // Don't let user look straight down
        maxPolarAngle={Math.PI / 2 - 0.02} // Stop just above ground
      />
    </>
  );
}